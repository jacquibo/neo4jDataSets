// The following are example queries to run against the PubCafe Graph database, once all the csv files in this folder have been imported using the Cypher scripts in the other txt files

// Example Cypher Queries for the PubCafe Graph

// a. Where is good for families?
MATCH (l)-[:HAS_CROWD]->(c:Crowd {name: 'Family-friendly'})
RETURN l AS Locations

// b. Where can I get lunch?
MATCH (l)-[:HAS_OFFERING]->(c:Offering {name: 'Lunch'})
RETURN l AS Locations

// c. Where has a rating of more than 4.3 and is not closed? Order by rating, highest first
MATCH (l)-[:HAS_STATUS]->(s:Status)
WHERE l.rating > 4.3 AND NOT toLower(s.name) CONTAINS toLower('closed')
RETURN l.name, l.rating
ORDER BY l.rating DESC

// d. Which locations have booking details?
MATCH (l)
WHERE l.booking IS NOT NULL
RETURN l AS Locations

// e. Which locations on the High Street are wheelchair accessible?
MATCH (l)-[:HAS_SERVICE]->(:Service {name: 'Wheelchair Accessible'})
WHERE toLower(l.address) CONTAINS toLower('high st')
RETURN l

// f. Where cam I get gin and take the family?
MATCH (l)-[:HAS_OFFERING]->(:Offering {name: 'Gin'})
WHERE (l)-[:HAS_CROWD]->(:Crowd {name: 'Family-friendly'})
OR (l)-[:HAS_AMENITY]->(:Amenity {name: 'Good for kids'})
RETURN l


// Useful general scripts

// RETURN ALL - return the whole graph!
MATCH (n) RETURN (n)

// DELETE ALL - use this to start again!
MATCH (n)
DETACH DELETE n
